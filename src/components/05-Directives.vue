<template>
  <div class="demo-container">
    <h2>5ï¸âƒ£ æŒ‡ä»¤ç³»ç»Ÿ</h2>
    <p class="intro">Vue æä¾›äº†ä¸°å¯Œçš„æŒ‡ä»¤æ¥æ“ä½œ DOM å’Œç»‘å®šæ•°æ®</p>

    <div class="demo-section">
      <h3>ğŸ“Œ v-if / v-else / v-show - æ¡ä»¶æ¸²æŸ“</h3>
      <div class="code-demo">
        <div class="demo-box">
          <button @click="showContent = !showContent">åˆ‡æ¢æ˜¾ç¤º</button>
          <button @click="type = 'success'">æˆåŠŸ</button>
          <button @click="type = 'warning'">è­¦å‘Š</button>
          <button @click="type = 'error'">é”™è¯¯</button>
          
          <div v-if="showContent" class="content-box">
            <div v-if="type === 'success'" class="alert success">
              âœ“ æ“ä½œæˆåŠŸ
            </div>
            <div v-else-if="type === 'warning'" class="alert warning">
              âš  è­¦å‘Šä¿¡æ¯
            </div>
            <div v-else-if="type === 'error'" class="alert error">
              âœ— é”™è¯¯ä¿¡æ¯
            </div>
            <div v-else class="alert info">
              â„¹ é»˜è®¤ä¿¡æ¯
            </div>
          </div>
          
          <div v-show="showContent" class="content-box">
            v-show: é€šè¿‡ CSS display æ§åˆ¶æ˜¾ç¤º
          </div>
        </div>
        <div class="code-explanation">
          <h4>ğŸ’¡ è¯´æ˜ï¼š</h4>
          <ul>
            <li><code>v-if</code> - æ¡ä»¶ä¸ºçœŸæ—¶æ¸²æŸ“å…ƒç´ </li>
            <li><code>v-else-if</code> - å¤šæ¡ä»¶åˆ¤æ–­</li>
            <li><code>v-else</code> - å¦åˆ™åˆ†æ”¯</li>
            <li><code>v-show</code> - é€šè¿‡ CSS æ§åˆ¶æ˜¾ç¤º</li>
            <li>v-if æœ‰æ›´é«˜çš„åˆ‡æ¢å¼€é”€</li>
            <li>v-show æœ‰æ›´é«˜çš„åˆå§‹æ¸²æŸ“å¼€é”€</li>
          </ul>
        </div>
      </div>
    </div>

    <div class="demo-section">
      <h3>ğŸ“Œ v-for - åˆ—è¡¨æ¸²æŸ“</h3>
      <div class="code-demo">
        <div class="demo-box">
          <h4>æ•°ç»„æ¸²æŸ“</h4>
          <div v-for="(item, index) in items" :key="item.id" class="list-item">
            <span>{{ index + 1 }}. {{ item.name }}</span>
            <button @click="removeItem(item.id)">åˆ é™¤</button>
          </div>
          <button @click="addItem">æ·»åŠ é¡¹ç›®</button>
          
          <h4 style="margin-top: 1rem;">å¯¹è±¡æ¸²æŸ“</h4>
          <div v-for="(value, key, index) in userObj" :key="key" class="list-item">
            {{ index }}. {{ key }}: {{ value }}
          </div>
        </div>
        <div class="code-explanation">
          <h4>ğŸ’¡ è¯´æ˜ï¼š</h4>
          <ul>
            <li><code>v-for="item in items"</code> - éå†æ•°ç»„</li>
            <li><code>v-for="(item, index) in items"</code> - è·å–ç´¢å¼•</li>
            <li><code>v-for="(value, key) in object"</code> - éå†å¯¹è±¡</li>
            <li><code>:key</code> å¿…é¡»æä¾›ï¼Œç”¨äºä¼˜åŒ–æ¸²æŸ“</li>
            <li>key åº”è¯¥æ˜¯å”¯ä¸€ä¸”ç¨³å®šçš„å€¼</li>
          </ul>
        </div>
      </div>
    </div>

    <div class="demo-section">
      <h3>ğŸ“Œ v-model - åŒå‘ç»‘å®š</h3>
      <div class="code-demo">
        <div class="demo-box">
          <div class="form-group">
            <label>æ–‡æœ¬è¾“å…¥:</label>
            <input v-model="formData.text" placeholder="è¾“å…¥æ–‡æœ¬..." />
            <p>å€¼: {{ formData.text }}</p>
          </div>
          
          <div class="form-group">
            <label>å¤šè¡Œæ–‡æœ¬:</label>
            <textarea v-model="formData.textarea" rows="3"></textarea>
            <p>å€¼: {{ formData.textarea }}</p>
          </div>
          
          <div class="form-group">
            <label>å¤é€‰æ¡†:</label>
            <input type="checkbox" v-model="formData.checkbox" />
            <p>å€¼: {{ formData.checkbox }}</p>
          </div>
          
          <div class="form-group">
            <label>å•é€‰æ¡†:</label>
            <label><input type="radio" v-model="formData.radio" value="A" /> A</label>
            <label><input type="radio" v-model="formData.radio" value="B" /> B</label>
            <p>å€¼: {{ formData.radio }}</p>
          </div>
          
          <div class="form-group">
            <label>ä¸‹æ‹‰é€‰æ‹©:</label>
            <select v-model="formData.select">
              <option value="">è¯·é€‰æ‹©</option>
              <option value="vue">Vue</option>
              <option value="react">React</option>
              <option value="angular">Angular</option>
            </select>
            <p>å€¼: {{ formData.select }}</p>
          </div>
        </div>
        <div class="code-explanation">
          <h4>ğŸ’¡ è¯´æ˜ï¼š</h4>
          <ul>
            <li><code>v-model</code> - åŒå‘æ•°æ®ç»‘å®š</li>
            <li>é€‚ç”¨äºè¡¨å•å…ƒç´ </li>
            <li><code>.lazy</code> - åœ¨ change äº‹ä»¶åæ›´æ–°</li>
            <li><code>.number</code> - è½¬æ¢ä¸ºæ•°å­—</li>
            <li><code>.trim</code> - å»é™¤é¦–å°¾ç©ºæ ¼</li>
          </ul>
        </div>
      </div>
    </div>

    <div class="demo-section">
      <h3>ğŸ“Œ v-bind - å±æ€§ç»‘å®š</h3>
      <div class="code-demo">
        <div class="demo-box">
          <input v-model="imageUrl" placeholder="è¾“å…¥å›¾ç‰‡URL..." />
          <input v-model="linkUrl" placeholder="è¾“å…¥é“¾æ¥URL..." />
          
          <div class="bind-demo">
            <img :src="imageUrl || 'https://via.placeholder.com/150'" :alt="imageAlt" />
            <a :href="linkUrl || '#'" target="_blank">{{ linkText }}</a>
          </div>
          
          <div 
            :class="['box', { active: isActive, disabled: isDisabled }]"
            :style="{ backgroundColor: bgColor, color: textColor }"
          >
            åŠ¨æ€æ ·å¼ç›’å­
          </div>
          
          <button @click="isActive = !isActive">åˆ‡æ¢ Active</button>
          <button @click="isDisabled = !isDisabled">åˆ‡æ¢ Disabled</button>
          <input type="color" v-model="bgColor" />
          <input type="color" v-model="textColor" />
        </div>
        <div class="code-explanation">
          <h4>ğŸ’¡ è¯´æ˜ï¼š</h4>
          <ul>
            <li><code>:src</code> - ç»‘å®šå±æ€§ï¼ˆv-bind ç®€å†™ï¼‰</li>
            <li><code>:class</code> - åŠ¨æ€ç»‘å®š class</li>
            <li><code>:style</code> - åŠ¨æ€ç»‘å®šæ ·å¼</li>
            <li>æ”¯æŒå¯¹è±¡å’Œæ•°ç»„è¯­æ³•</li>
            <li>å¯ä»¥ç»‘å®šä»»ä½• HTML å±æ€§</li>
          </ul>
        </div>
      </div>
    </div>

    <div class="demo-section">
      <h3>ğŸ“Œ v-on - äº‹ä»¶ç›‘å¬</h3>
      <div class="code-demo">
        <div class="demo-box">
          <button @click="handleClick">æ™®é€šç‚¹å‡»</button>
          <button @click="handleClickWithParam('å‚æ•°')">å¸¦å‚æ•°ç‚¹å‡»</button>
          <button @click="count++">å†…è”è¡¨è¾¾å¼</button>
          <p>ç‚¹å‡»æ¬¡æ•°: {{ count }}</p>
          
          <input 
            @keyup.enter="handleEnter"
            @keyup.esc="handleEsc"
            placeholder="æŒ‰ Enter æˆ– Esc..."
          />
          
          <div 
            @click="handleOuterClick"
            class="click-area"
          >
            å¤–å±‚
            <div @click.stop="handleInnerClick" class="inner-area">
              å†…å±‚ (é˜»æ­¢å†’æ³¡)
            </div>
          </div>
        </div>
        <div class="code-explanation">
          <h4>ğŸ’¡ è¯´æ˜ï¼š</h4>
          <ul>
            <li><code>@click</code> - ç›‘å¬äº‹ä»¶ï¼ˆv-on ç®€å†™ï¼‰</li>
            <li><code>.stop</code> - é˜»æ­¢äº‹ä»¶å†’æ³¡</li>
            <li><code>.prevent</code> - é˜»æ­¢é»˜è®¤è¡Œä¸º</li>
            <li><code>.enter</code> - æŒ‰é”®ä¿®é¥°ç¬¦</li>
            <li><code>.once</code> - åªè§¦å‘ä¸€æ¬¡</li>
          </ul>
        </div>
      </div>
    </div>

    <div class="code-block">
      <h3>ğŸ“ æ ¸å¿ƒä»£ç ç¤ºä¾‹</h3>
      <pre><code>&lt;!-- æ¡ä»¶æ¸²æŸ“ --&gt;
&lt;div v-if="show"&gt;æ˜¾ç¤ºå†…å®¹&lt;/div&gt;
&lt;div v-show="show"&gt;é€šè¿‡ CSS æ§åˆ¶&lt;/div&gt;

&lt;!-- åˆ—è¡¨æ¸²æŸ“ --&gt;
&lt;div v-for="(item, index) in items" :key="item.id"&gt;
  {{ index }}: {{ item.name }}
&lt;/div&gt;

&lt;!-- åŒå‘ç»‘å®š --&gt;
&lt;input v-model="message" /&gt;
&lt;input v-model.number="age" /&gt;
&lt;input v-model.trim="text" /&gt;

&lt;!-- å±æ€§ç»‘å®š --&gt;
&lt;img :src="imageUrl" :alt="imageAlt" /&gt;
&lt;div :class="{ active: isActive }"&gt;&lt;/div&gt;
&lt;div :style="{ color: textColor }"&gt;&lt;/div&gt;

&lt;!-- äº‹ä»¶ç›‘å¬ --&gt;
&lt;button @click="handleClick"&gt;ç‚¹å‡»&lt;/button&gt;
&lt;button @click.stop="handleClick"&gt;é˜»æ­¢å†’æ³¡&lt;/button&gt;
&lt;input @keyup.enter="handleEnter" /&gt;</code></pre>
    </div>

    <div class="tips-box">
      <h3>ğŸ¯ æœ€ä½³å®è·µ</h3>
      <ul>
        <li><strong>v-if vs v-showï¼š</strong>é¢‘ç¹åˆ‡æ¢ç”¨ v-showï¼Œæ¡ä»¶å¾ˆå°‘æ”¹å˜ç”¨ v-if</li>
        <li><strong>v-for keyï¼š</strong>å§‹ç»ˆæä¾›å”¯ä¸€çš„ keyï¼Œä¸è¦ç”¨ index</li>
        <li><strong>v-for ä¼˜å…ˆçº§ï¼š</strong>ä¸è¦å’Œ v-if ä¸€èµ·ä½¿ç”¨</li>
        <li><strong>äº‹ä»¶ä¿®é¥°ç¬¦ï¼š</strong>åˆç†ä½¿ç”¨ .stopã€.prevent ç­‰ä¿®é¥°ç¬¦</li>
      </ul>
    </div>
  </div>
</template>

<script setup>
import { ref, reactive } from 'vue'

const showContent = ref(true)
const type = ref('success')

const items = ref([
  { id: 1, name: 'é¡¹ç›® 1' },
  { id: 2, name: 'é¡¹ç›® 2' },
  { id: 3, name: 'é¡¹ç›® 3' }
])

let nextId = 4

const addItem = () => {
  items.value.push({ id: nextId++, name: `é¡¹ç›® ${nextId - 1}` })
}

const removeItem = (id) => {
  const index = items.value.findIndex(item => item.id === id)
  if (index > -1) {
    items.value.splice(index, 1)
  }
}

const userObj = reactive({
  name: 'å¼ ä¸‰',
  age: 25,
  job: 'å¼€å‘è€…'
})

const formData = reactive({
  text: '',
  textarea: '',
  checkbox: false,
  radio: '',
  select: ''
})

const imageUrl = ref('')
const imageAlt = ref('ç¤ºä¾‹å›¾ç‰‡')
const linkUrl = ref('')
const linkText = ref('ç‚¹å‡»è®¿é—®')

const isActive = ref(false)
const isDisabled = ref(false)
const bgColor = ref('#667eea')
const textColor = ref('#ffffff')

const count = ref(0)

const handleClick = () => {
  console.log('æŒ‰é’®è¢«ç‚¹å‡»')
}

const handleClickWithParam = (param) => {
  console.log('å¸¦å‚æ•°ç‚¹å‡»:', param)
}

const handleEnter = (e) => {
  console.log('æŒ‰ä¸‹ Enter:', e.target.value)
}

const handleEsc = () => {
  console.log('æŒ‰ä¸‹ Esc')
}

const handleOuterClick = () => {
  console.log('å¤–å±‚ç‚¹å‡»')
}

const handleInnerClick = () => {
  console.log('å†…å±‚ç‚¹å‡»ï¼ˆå·²é˜»æ­¢å†’æ³¡ï¼‰')
}
</script>

<style scoped>
.demo-container {
  background: white;
  padding: 2rem;
  border-radius: 12px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}

h2 {
  color: #667eea;
  margin-bottom: 1rem;
  font-size: 2rem;
}

.intro {
  color: #666;
  font-size: 1.1rem;
  margin-bottom: 2rem;
  padding: 1rem;
  background: #f8f9fa;
  border-radius: 8px;
  border-left: 4px solid #667eea;
}

.demo-section {
  margin: 2rem 0;
  padding: 1.5rem;
  background: #f8f9fa;
  border-radius: 8px;
}

.demo-section h3 {
  color: #333;
  margin-bottom: 1rem;
}

.code-demo {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1.5rem;
  margin-top: 1rem;
}

.demo-box {
  background: white;
  padding: 1.5rem;
  border-radius: 8px;
  box-shadow: 0 2px 5px rgba(0,0,0,0.05);
}

.demo-box h4 {
  color: #667eea;
  margin-bottom: 1rem;
}

.demo-box button {
  margin: 0.5rem 0.5rem 0 0;
  padding: 0.6rem 1.2rem;
  background: #667eea;
  color: white;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.3s;
}

.demo-box button:hover {
  background: #5568d3;
  transform: translateY(-2px);
}

.content-box {
  margin-top: 1rem;
  padding: 1rem;
  background: #f8f9fa;
  border-radius: 6px;
}

.alert {
  padding: 1rem;
  border-radius: 6px;
  margin: 0.5rem 0;
}

.alert.success {
  background: #d4edda;
  color: #155724;
  border-left: 4px solid #28a745;
}

.alert.warning {
  background: #fff3cd;
  color: #856404;
  border-left: 4px solid #ffc107;
}

.alert.error {
  background: #f8d7da;
  color: #721c24;
  border-left: 4px solid #dc3545;
}

.alert.info {
  background: #d1ecf1;
  color: #0c5460;
  border-left: 4px solid #17a2b8;
}

.list-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.8rem;
  background: #f8f9fa;
  margin: 0.5rem 0;
  border-radius: 6px;
}

.list-item button {
  padding: 0.4rem 0.8rem;
  font-size: 0.85rem;
  background: #dc3545;
}

.form-group {
  margin: 1rem 0;
  padding: 1rem;
  background: #f8f9fa;
  border-radius: 6px;
}

.form-group label {
  display: block;
  margin: 0.5rem 0;
  color: #555;
  font-weight: 500;
}

.form-group input[type="text"],
.form-group input[type="number"],
.form-group textarea,
.form-group select {
  width: 100%;
  padding: 0.6rem;
  border: 2px solid #e0e0e0;
  border-radius: 6px;
  font-size: 1rem;
}

.form-group input:focus,
.form-group textarea:focus,
.form-group select:focus {
  outline: none;
  border-color: #667eea;
}

.form-group p {
  margin-top: 0.5rem;
  color: #667eea;
  font-weight: 500;
}

.bind-demo {
  margin: 1rem 0;
  padding: 1rem;
  background: #f8f9fa;
  border-radius: 6px;
  text-align: center;
}

.bind-demo img {
  max-width: 150px;
  border-radius: 8px;
  margin: 0.5rem;
}

.bind-demo a {
  display: block;
  margin: 1rem 0;
  color: #667eea;
  text-decoration: none;
  font-weight: 500;
}

.box {
  padding: 1.5rem;
  margin: 1rem 0;
  border-radius: 8px;
  text-align: center;
  font-weight: bold;
  transition: all 0.3s;
}

.box.active {
  transform: scale(1.1);
  box-shadow: 0 5px 20px rgba(0,0,0,0.2);
}

.box.disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.demo-box input[type="color"] {
  margin: 0.5rem;
  width: 60px;
  height: 40px;
  border: none;
  border-radius: 6px;
  cursor: pointer;
}

.click-area {
  margin: 1rem 0;
  padding: 2rem;
  background: #e8f4f8;
  border-radius: 8px;
  cursor: pointer;
  text-align: center;
}

.inner-area {
  margin: 1rem auto;
  padding: 1rem;
  background: #667eea;
  color: white;
  border-radius: 6px;
  max-width: 200px;
}

.code-explanation {
  background: white;
  padding: 1.5rem;
  border-radius: 8px;
  box-shadow: 0 2px 5px rgba(0,0,0,0.05);
}

.code-explanation h4 {
  color: #667eea;
  margin-bottom: 1rem;
}

.code-explanation ul {
  list-style: none;
  padding: 0;
}

.code-explanation li {
  padding: 0.5rem 0;
  color: #555;
  line-height: 1.6;
}

.code-explanation code {
  background: #f8f9fa;
  padding: 0.2rem 0.5rem;
  border-radius: 4px;
  color: #667eea;
  font-family: 'Courier New', monospace;
}

.code-block {
  margin: 2rem 0;
  background: #2d3748;
  padding: 1.5rem;
  border-radius: 8px;
  overflow-x: auto;
}

.code-block h3 {
  color: white;
  margin-bottom: 1rem;
}

.code-block pre {
  margin: 0;
}

.code-block code {
  color: #a0aec0;
  font-family: 'Courier New', monospace;
  font-size: 0.9rem;
  line-height: 1.6;
}

.tips-box {
  background: #fff3cd;
  padding: 1.5rem;
  border-radius: 8px;
  border-left: 4px solid #ffc107;
  margin-top: 2rem;
}

.tips-box h3 {
  color: #856404;
  margin-bottom: 1rem;
}

.tips-box ul {
  list-style: none;
  padding: 0;
}

.tips-box li {
  padding: 0.5rem 0;
  color: #856404;
}

.tips-box strong {
  color: #533f03;
}

@media (max-width: 768px) {
  .code-demo {
    grid-template-columns: 1fr;
  }
}
</style>
